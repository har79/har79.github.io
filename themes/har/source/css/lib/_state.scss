@use "color";

@mixin focus($internal-outline: false) {
  outline: none;
  position: relative;

  &::after {
    $spacing: if($internal-outline, 2px, -2px);
    content: "";
    position: absolute;
    top: $spacing;
    right: $spacing;
    bottom: $spacing;
    left: $spacing;
    border-radius: 4px;
    outline: 2px solid currentColor;
  }
}

@mixin color-with-hover($color, $internal-outline: false) {
  color: color.check-contrast($color);

  &:hover {
    color: color.check-contrast(color.darken($color, $contrast: 3));
  }

  &:active {
    @include focus($internal-outline: $internal-outline);
  }
}

@mixin link(
  $color: color.$action,
  $visited: color.$visited,
  $internal-outline: false
) {
  &:link {
    @include color-with-hover($color, $internal-outline: $internal-outline);
  }

  &:visited {
    @include color-with-hover(
      if($visited, $visited, $color),
      $internal-outline: $internal-outline
    );
  }

  &:where(:focus-visible) {
    @include focus($internal-outline: $internal-outline);
  }
}

@mixin hidden {
  position: absolute;
  height: 1px;
  width: 1px;

  overflow: hidden;

  clip: rect(0 0 0 0);
}
